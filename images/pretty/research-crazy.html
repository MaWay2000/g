<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Warzone 2100 Autohoster ‚Äî Research: Crazy Stats</title>
  <link rel="stylesheet" href="./css/style.css" />
  <style>
    .grid{display:grid;gap:12px;grid-template-columns:repeat(12,1fr)}
    .card{grid-column:span 12;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px}
    @media(min-width:900px){ .half{grid-column:span 6} .third{grid-column:span 4} }
    .kpi{display:flex;gap:10px;align-items:baseline;flex-wrap:wrap}
    .kpi .big{font-size:28px;font-weight:800;letter-spacing:.2px}
    .kpi .label{opacity:.8}
    .muted{opacity:.75}
    .row{display:flex;justify-content:space-between;gap:12px;padding:8px 0;border-top:1px solid rgba(255,255,255,.08)}
    .row:first-child{border-top:0}
    .pill{display:inline-block;padding:3px 8px;border-radius:999px;border:1px solid rgba(255,255,255,.18);opacity:.9;font-size:12px}
    .table{width:100%;border-collapse:collapse}
    .table th,.table td{padding:9px 8px;border-top:1px solid rgba(255,255,255,.08);text-align:left;vertical-align:top}
    .table th{opacity:.8;font-weight:700}
    .right{text-align:right}
    .controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    select,input{background:rgba(0,0,0,.25);border:1px solid rgba(255,255,255,.16);color:inherit;border-radius:10px;padding:8px 10px}
    button{border-radius:10px;padding:8px 10px;border:1px solid rgba(255,255,255,.18);background:rgba(255,255,255,.06);color:inherit;cursor:pointer}
    button:hover{background:rgba(255,255,255,.10)}
    .badge{font-weight:800}
  </style>
</head>
<body>
  <header class="topbar">
  <div class="brand">Warzone 2100 Autohoster</div>
  <nav class="nav">
    <a class="navlink" data-nav="home" href="./">Home</a>
    <a class="navlink" data-nav="games" href="./games.html">Games</a>
    <a class="navlink" data-nav="players" href="./players.html">Players</a>
    <a class="navlink" data-nav="lobby" href="./lobby.html">Lobby</a>
    <a class="navlink" data-nav="leaderboard" href="./top.html">Leaderboard</a>
  </nav>
</header>

  <main class="wrap">
    <section class="page">
      <h1>Research+: Crazy Stats</h1>
      <p class="muted">
        Built from your existing <span class="pill">matchstats.json</span> research events.
        This page is ‚Äúbest effort‚Äù across different schema versions ‚Äî it auto-detects fields.
      </p>

      <div class="controls card" style="margin:12px 0">
        <button id="btnRefresh">Refresh</button>
        <span class="muted" id="status">Loading‚Ä¶</span>
        <span style="flex:1"></span>
        <label class="muted">Scope</label>
        <select id="scope">
          <option value="all">All time</option>
          <option value="30">Last 30 days</option>
          <option value="7">Last 7 days</option>
        </select>
        <label class="muted">Min games</label>
        <select id="minGames">
          <option value="1">1</option>
          <option value="3" selected>3</option>
          <option value="5">5</option>
          <option value="10">10</option>
        </select>
        <label class="muted">Search player</label>
        <input id="q" placeholder="e.g. Roro" />
      </div>

      <div class="grid">
        <div class="card third">
          <div class="kpi"><span class="big" id="kGames">‚Äî</span><span class="label">games analysed</span></div>
          <div class="kpi"><span class="big" id="kEvents">‚Äî</span><span class="label">research events</span></div>
          <div class="kpi"><span class="big" id="kPlayers">‚Äî</span><span class="label">players</span></div>
        </div>

        <div class="card third">
          <h3 style="margin:0 0 8px 0">‚ö° Tech Rushers</h3>
          <div class="muted" style="margin-bottom:10px">Fastest average research tempo (events/min) in games they played.</div>
          <div id="rushers"></div>
        </div>

        <div class="card third">
          <h3 style="margin:0 0 8px 0">üß† Diversity Kings</h3>
          <div class="muted" style="margin-bottom:10px">Most unique techs researched (normalized per game).</div>
          <div id="diversity"></div>
        </div>

        <div class="card half">
          <h3 style="margin:0 0 8px 0">üèÅ ‚ÄúFirst To‚Äù Scoreboard</h3>
          <div class="muted" style="margin-bottom:10px">
            Who tends to unlock key categories earliest (based on tech name keywords).
          </div>
          <table class="table" id="firstToTbl">
            <thead><tr><th>Category</th><th>Player</th><th class="right">Best time</th><th class="right">Games</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>

        <div class="card half">
          <h3 style="margin:0 0 8px 0">üòà ‚ÄúUnhinged‚Äù Picks</h3>
          <div class="muted" style="margin-bottom:10px">
            Funny / brutal derived stats (because why not).
          </div>
          <div id="unhinged"></div>
        </div>

        <div class="card">
          <h3 style="margin:0 0 8px 0">üìå Player Drilldown</h3>
          <div class="muted" style="margin-bottom:10px">Type a player name above to filter. Shows their signature research vibes.</div>
          <table class="table" id="playerTbl">
            <thead>
              <tr>
                <th>Player</th>
                <th class="right">Games</th>
                <th class="right">Events/min</th>
                <th class="right">Unique techs/game</th>
                <th>Top keywords</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div class="card">
          <h3 style="margin:0 0 8px 0">Schema notes</h3>
          <p class="muted" style="margin:0">
            This page looks for research events like:
            <span class="pill">{time,t,sec,ms}</span>
            <span class="pill">{player,name}</span>
            <span class="pill">{tech,topic,item}</span>.
            If your generator changes field names, this page usually keeps working.
          </p>
        </div>
      </div>
    </section>
  </main>

  <script src="./js/research-crazy.js"></script>
  <script src="./js/nav-active.js"></script>

<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="/matomo/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '1']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->

</body>
</html>
