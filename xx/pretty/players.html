<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Players — Warzone 2100 Autohoster</title>
  <link rel="stylesheet" href="./css/style.css" />
  <style>
    :root{
      --bg:#f6f7fb;
      --card:#ffffff;
      --ink:#111827;
      --muted:#6b7280;
      --line:#e5e7eb;
      --chip:#f3f4f6;
      --shadow: 0 10px 30px rgba(17,24,39,.08);
    }
    body{ background: var(--bg); color: var(--ink); }
    .wrap{ max-width: 1180px; margin: 0 auto; padding: 18px 18px 40px; }
    .hero{ display:flex; align-items:flex-end; justify-content:space-between; gap:16px; padding: 18px 18px 10px; }
    h1{ font-size: 42px; line-height:1; margin: 6px 0; }
    .sub{ color: var(--muted); margin-top: 6px; }
    .toolbar{ display:flex; flex-wrap:wrap; gap:10px; align-items:center; padding: 12px 18px 18px; }
    .box{ background: var(--card); border: 1px solid var(--line); border-radius: 16px; box-shadow: var(--shadow); }
    .btn{ border:1px solid var(--line); background:#fff; border-radius: 12px; padding: 10px 14px; font-weight:600; cursor:pointer; }
    .btn.primary{ background:#2563eb; color:white; border-color:#1d4ed8; }
    .input{ flex: 1 1 260px; min-width: 220px; border:1px solid var(--line); border-radius: 12px; padding: 10px 12px; font-size: 15px; background: #fff; }
    .pill{ display:inline-flex; align-items:center; gap:8px; padding: 7px 10px; border-radius: 999px; background: var(--chip); border: 1px solid var(--line); color: #374151; font-size: 13px; white-space: nowrap; }
    .grid{ display:grid; grid-template-columns: 1.2fr .8fr; gap: 14px; }
    @media (max-width: 980px){ .grid{ grid-template-columns: 1fr; } }

    table{ width:100%; border-collapse: separate; border-spacing: 0; overflow:hidden; }
    thead th{
      text-align:left; font-size: 12px; letter-spacing: .08em; text-transform: uppercase;
      color: #6b7280; padding: 12px 14px; border-bottom: 1px solid var(--line);
      background: #fbfbfe; position: sticky; top: 0; z-index: 2;
    }
    tbody td{ padding: 12px 14px; border-bottom: 1px solid var(--line); vertical-align: top; }
    tbody tr:hover{ background:#fafbff; }
    .name{ font-weight: 800; color:#1d4ed8; cursor:pointer; }
    .muted{ color: var(--muted); }
    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
    .kpi{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; padding: 12px 14px 10px; border-bottom: 1px solid var(--line); background: #fbfbfe; border-top-left-radius: 16px; border-top-right-radius: 16px; }
    .kpi strong{ font-size: 20px; }
    .rightcol .list{ max-height: 640px; overflow:auto; }
    .card{ border:1px solid var(--line); border-radius: 14px; padding: 12px; background:#fff; margin: 10px 12px; box-shadow: 0 6px 18px rgba(17,24,39,.06); }
    .card h3{ margin:0 0 6px; font-size: 16px; }
    .card .meta{ color: var(--muted); font-size: 13px; }
    .links{ display:flex; flex-wrap:wrap; gap:8px; margin-top: 10px; }
    .a{
      display:inline-flex; align-items:center; gap:6px; padding: 7px 10px;
      border: 1px solid var(--line); border-radius: 999px; background:#fff;
      color:#111827; text-decoration:none; font-weight: 600; font-size: 13px;
    }
    .a:hover{ background:#f3f4ff; }
    .modalBack{
      position: fixed; inset: 0; background: rgba(17,24,39,.48);
      display:none; align-items:center; justify-content:center; z-index: 50; padding: 18px;
    }
    .modal{
      width: min(980px, 96vw); max-height: min(820px, 90vh); overflow: auto;
      background:#fff; border-radius: 18px; border: 1px solid rgba(255,255,255,.4);
      box-shadow: 0 30px 80px rgba(0,0,0,.25);
    }
    .modalHead{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding: 14px 16px; border-bottom: 1px solid var(--line);
      position: sticky; top:0; background:#fff; z-index: 2;
    }
    .close{ border:1px solid var(--line); background:#fff; border-radius: 12px; padding: 8px 10px; cursor:pointer; font-weight: 800; }
    .gamesTable thead th{ top: 58px; }
    .tag{
      display:inline-flex; padding: 2px 8px; border-radius: 999px;
      background:#eef2ff; color:#3730a3; border:1px solid #e0e7ff;
      font-size: 12px; font-weight: 700; margin-left: 8px;
    }
  </style>
</head>
<body>
  <header class="topbar">
  <div class="brand">Warzone 2100 Autohoster</div>
  <nav class="nav">
    <a class="navlink" data-nav="home" href="./">Home</a>
    <a class="navlink" data-nav="games" href="./games.html">Games</a>
    <a class="navlink" data-nav="players" href="./players.html">Players</a>
    <a class="navlink" data-nav="lobby" href="./lobby.html">Lobby</a>
    <a class="navlink" data-nav="leaderboard" href="./top.html">Leaderboard</a>
  </nav>
</header>

  <main class="wrap">
    <section class="box">
      <div class="hero">
        <div>
          <h1>Players</h1>
          <div class="sub">A friendly “who played what” page built from <span class="mono">/jsons/matchstats.json</span>.</div>
        </div>
        <div id="status" class="pill">Idle</div>
      </div>

      <div class="toolbar">
        <button class="btn primary" id="btnRefresh">Refresh</button>
        <input class="input" id="q" placeholder="Search player / map / game id…" />
        <span class="pill"><strong id="kPlayers">0</strong> players</span>
        <span class="pill"><strong id="kGames">0</strong> games</span>
        <span class="pill"><strong id="kLast">—</strong> last game</span>
      </div>

      <div class="grid" style="padding: 0 14px 14px;">
        <section class="box" style="border:none; box-shadow:none; overflow:hidden;">
          <div class="kpi">
            <div class="pill">Tip: click a <span style="font-weight:800;">player name</span> for recent games</div>
            <div class="pill">Opens: <span class="mono">game-players</span> + <span class="mono">research-timeline</span></div>
          </div>
          <div style="max-height: 660px; overflow:auto;">
            <table id="tbl">
              <thead>
                <tr>
                  <th style="width:28%;">Player</th>
                  <th style="width:10%;">Games</th>
                  <th style="width:10%;">Wins</th>
                  <th style="width:10%;">Losses</th>
                  <th style="width:18%;">Last seen (UTC)</th>
                  <th>Most played map</th>
                </tr>
              </thead>
              <tbody id="tbody"></tbody>
            </table>
          </div>
        </section>

        <aside class="rightcol box">
          <div class="kpi">
            <strong style="margin-right:6px;">Highlights</strong>
            <span class="pill" id="hiTop">—</span>
          </div>
          <div class="list" id="highlights"></div>
        </aside>
      </div>
    </section>
  </main>

  <div class="modalBack" id="modalBack" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modalHead">
        <div>
          <div id="modalTitle" style="font-size:18px; font-weight:900;">Player</div>
          <div id="modalSub" class="muted" style="font-size:13px;">—</div>
        </div>
        <button class="close" id="btnClose">✕</button>
      </div>
      <div style="padding: 12px 14px 16px;">
        <div id="modalLinks" class="links"></div>
        <div style="height:10px;"></div>
        <table class="gamesTable" style="width:100%;">
          <thead>
            <tr>
              <th style="width:16%;">When (UTC)</th>
              <th style="width:14%;">Duration</th>
              <th style="width:20%;">Map</th>
              <th>Result</th>
              <th style="width:22%;">Open</th>
            </tr>
          </thead>
          <tbody id="modalBody"></tbody>
        </table>
      </div>
    </div>
  </div>

  <script src="./players.js"></script>
  <script src="./js/nav-active.js"></script>

<!-- Matomo -->
<script>
  (function() {
    if (/github\.io$/i.test(window.location.hostname)) {
      return;
    }
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
      var u="/matomo/";
      _paq.push(['setTrackerUrl', u+'matomo.php']);
      _paq.push(['setSiteId', '1']);
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
    })();
  })();
</script>
<!-- End Matomo Code -->

</body>
</html>
